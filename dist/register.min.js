/**
 * Instantiator. 
 */
__crisis.init	=	function() {
	//Build regex.
	this.buildRegex();
	
	//If the system should automatically begin.
	if (this.automatic) this.process();
	
	//Return this.
	return this;
};

//Support various module ecostystems. 
(function (root, factory) {
	console.log(root, factory, 'a'); 
	
	//If AMD is supported. 
	if (typeof define === 'function' && define.amd) {
		define('crisis', function(settings) {
			return (root.crisis = factory(settings));
		});
	//If CommonJS is supported. 
	} else if (typeof module === 'object' && module.exports) {
		module.exports	=	(root.crisis = factory(settings));
	//Fallback to Pure JS. 
	} else {
		root.crisis		=	factory(settings);	
	}
}(this, function(settings) {
	//Load a copy of crisis into scope.
	var	crisis	=	__crisis;
	
	//Clear global scope. 
	__crisis	=	undefined;
	
	//For each setting.
	for (var key in settings) {
		//Skip this iteration if the property is from prototype.
		if (!settings.hasOwnProperty(key)) continue;
		
		//Set the setting.
		crisis[key]		=	settings[key];
	}
	
	//Instantiate crisis and return it. 
	return crisis.init();
});